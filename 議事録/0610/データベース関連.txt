書いた人：小川
ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
議題　
　チーム演習（データベースの作成）
時間
　10：00　～　17：00
ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
内容
〇データベース定義書の修正と確認

・s_answerテーブルの診断結果番号のint型
　→結果が１の場合、当てはまらないと表示。５の場合、当てはまると表示。
　

・questionテーブルの診断IDの意味：
　診断ID　診断項目
　　　１　頭が痛い
　　　２　体がだるい
　　　３　食欲がない
　　　４　・・・
　　　・　・・・　
　　　・　・・・

　s_answerテーブルも同様：。s_answerテーブルは診断IDではなく、
　診断結果IDに変更。主キーは診断結果ID。＋AUTO INCREMENT

　〈〈データベース定義書の変更点〉〉
　
　questionテーブル→s_questionテーブルに変更（診断ページ用テーブル）
　　　診断ID→診断項目ID
　　　診断項目１～15→診断項目　
　　　変更した理由：診断項目IDに意味を持たすため。追加しやすくするため。

　resultテーブル→s_answerテーブルに変更（診断ページ用テーブル）
　　診断ID→診断結果ID
　　診断結果番号1～15→診断結果
　　診断項目IDの追加

　　　　それ以外は削除
　　
　　
　commentテーブル→s_resultテーブルに変更（診断結果ページ用テーブル）
　　日付、ユーザーID、アイコンの追加
　　診断ID→診断結果ID 
　　
　　ユーザーID（user_id）はuser_loginテーブルから結合
　
　　

　診断結果内容テーブル→診断のページの当てはまる、当てはまらない…
　　　　　　　　　　　　の表示のためのテーブル
　　　　　　　　　　　　診断結果には1～5の数字が入る



　簡潔にまとめると、、、、
　・コメントテーブル、リザルトテーブル削除、s_answeテーブル、s_resultテーブルの追加
　・テーブルの変更に伴い、DAO、Modelも変更完了。
　　s_questionテーブル（質問を扱うテーブル）とs_answerテーブル（回答を扱うテーブル）
　　で受け取った結果をもとに、s_resultテーブルを使って診断結果ページを表示する。
　・結合するときはuser_idで結合する。

---------------------------------------------------------------------------------------------------------------------------------------------------------


〇H2コンソールでテーブルの作成

・s_resultテーブルのuser_idは、user_loginテーブルから結合したuser_idを使用するが、
　クリエイトテーブルでの結合方法がわからない。
　とりあえず、s_resultテーブルのuser_idは外部キーとして追加した。
　（参考サイト：http://www.pursue.ne.jp/jouhousyo/SQLDoc/create_table.html）

　　↓

　診断結果テーブル
　create table s_result (
　result_id int (10) PRIMARY KEY AUTO_INCREMENT,
　date char(10) NOT NULL,
　icon varchar(7) NOT NULL,
　user_comment varchar (300),
　admin_comment varchar (300),
　user_id int (10),
　FOREIGN KEY (user_id) REFERENCES user_login
　);

　create tableで実行することはできたが、実際に動かせるかは不明。

　→インサートしたとき、user_idはuser_loginテーブルからどのように結合させればよいのか。
　→JavaBeansにデータを渡すときにuser_idがあればよい。
　　user_idをセッションスコープから渡す。
　→SQLで結合させるのではなく、Servletなどでどうにかすればよい。



ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
結論：
　・データベースの作成が終わった
　　（修正する可能性はあり）

  【明日の予定】
　・Modelに取り掛かる
　　→まずはBeanの作成
　　→Beanの作成が終わったらDAOの作成
ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー